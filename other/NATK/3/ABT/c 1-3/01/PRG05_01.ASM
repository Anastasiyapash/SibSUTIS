;---------Prg05_01.asm----------------------------------------------------------------------------
; Пример использования int 21h для функций: 02h и 09h
;-----------------------------------------------------------------------------------------------------
masm
model small
;.stack 100h
.data
var1	db 	'Пример простой программы ...','$'
var2	db	0dh,0ah,'Конец сегмента данных программы ...',0
len=$-var2
.code
start:
	mov	ax,@data
	mov	ds,ax
;----------------------------
; Вставка
        mov ah,02h
        mov dl,var2+4
        int 21h
	mov	ah,09h     		; 09h - код функции для вывода строки,
					;	которая заканчивается '$'
	mov	dx,offset var1          ; адрес начала строки
	int	21h                     ; вывод строки на экран
        
	mov	dl,'!'                  ; '!' - выводимый на экран символ
	mov	ah,2                    ; 02h - код функции для вывода символа
	int	21h                     ; вывод символа на экран

	mov	si,offset var2          ; адрес строки
	mov	ah,02h                  ; 02h - код функции для вывода символа
    .loop:
	lodsb                           ; в al - очередной символ
	or	al,al                   ; al=0 ?
	jz	.done                   ;	да.
	mov	dl,al                   ;	нет. В dl - очередной символ
	int	21h                     ; вывод символа на экран
	jmp	.loop
    .done:

	mov	cx,len
	lea	si,var2
	mov	ah,02h
.loop1:
	mov	dl,[si]
	int	21h
	inc	si
	loop	.loop1
;----------------------------
	mov	ax,4c00h
	int	21h
end	start

                                 2