;-----------------------------------------------------------
; Пример вывода символа.
;-----------------------------------------------------------
model small
.data
message db 'Ассемблер - базовый язык компьютера',0
msg db 0ah,0dh,'Ассемблер - базовый язык компьютера'
len=$-msg	
.code
start:
	mov	ax,@data		; связываем регистр ds с сегментом
	mov	ds,ax                   ;	данных через регистр ax

	mov	dl,'!'                  ; '!' - выводимый на экран символ
	call	Out_symbol              ; вызов подпрограммы

	lea	si, message	        ; адрес строки
    .loop:
	lodsb                           ; в al - очередной символ
	or	al,al                   ; al=0 ?
	jz	.done                   ;	да.
	mov	dl,al                   ;	нет. В dl - очередной символ
	call	Out_symbol              ; вызов подпрограммы
	jmp	.loop
    .done:

	mov	cx,len                  ; кол-во повторений цикла
	lea	si,msg                  ; адрес строки
	mov	ah,02h                  ; функция вывода символа на экран
	call 	out$                    ; вызов подпрограммы

	mov	ax,4c00h                ; 4c00h - код функции для стандартного
					;	 выхода
	int	21h			; стандартный выход

;############################
Out_symbol	proc                    ; подпрограмма
	mov	ah,02h                  ; 02h - код функции для вывода символа
	int	21h                     ; вывод символа на экран
	ret                             ; возвращение в вызывающую программу
Out_symbol	endp
;############################
out$	proc                            ; подпрограмма
	mov	dl,[si]                 ; в dl - очередной символ
	int	21h                     ; вывод символа на экран
	inc	si                      ; увеличение адреса
	loop	out$
	ret                             ; возвращение в вызывающую программу
out$	endp
;############################

end	start

