;-----------------------------------------------------------
; Пример ввода строки с 0ah int 21h
;-----------------------------------------------------------

data	segment para public 'data'	; начало сегмента данных
                                        ; para - сегмент начинается по адресу
                                        ;         кратному 16
                                        ; public - объединять все сегменты с
                                        ;           одинаковым именем 'data'
message1	db	'Введите любую строку: $'
message2	db	0ah,0dh,'Вы ввели строку: $'
parlist	label	byte	;Список параметров
maxlen	db	79              ;максимальная длина значения
actlen	db	?               ;фактически введенная длина
value	db	80 dup(0)       ;введенное значение
data	ends                            ; конец сегмента данных

stk	segment stack                   ; начало сегмента стека
	db	256 dup('?')
stk	ends                            ; конец сегмента стека

code	segment para public 'code'      ; начало сегмента кода
	assume	cs:code,ds:data;,ss:stk
smain	proc

	mov	ax,data        		; связываем регистр ds с сегментом
	mov	ds,ax                   ;	данных через регистр ax

	mov	ah,09h                  ; 09h - код функции для вывода строки,
                                        ;	которая заканчивается '$'
	mov	dx,offset message1  	; адрес начала строки
	int	21h                     ; вывод строки на экран

	mov	ah,0ah                  ; 0ah - код функции для ввода строки
	lea	dx,parlist              ; адрес с параметрами для ввода строки
	int	21h                     ; ввод строки с клавиатуры

	mov	ah,09h                  ; 09h - код функции для вывода строки
	mov	dx,offset message2  	; адрес начала строки
	int	21h                     ; вывод строки на экран

	mov	cl,actlen               ; длина введенной с клавиатуры строки
	lea	si,value                ; адрес значения введенной строки
	mov	ah,2h                   ; 02h - код функции для вывода символа
mlbl:
	mov	dl,[si]                 ; выводимое значение символа
	int	21h                     ; вывод символа на экран
	inc	si                      ; адрес следующего сммвола
	loop	mlbl                    ; кол-во повторений = длине строки

	mov	ax,4c00h                ; 4c00h - код функции для стандартного
                                        ;	 выхода
	int 21h                         ; стандартный выход

smain	endp
code	ends                            ; конец сегмента кода
end	smain
