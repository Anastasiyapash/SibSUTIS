Turbo Assembler	 Version 4.1	    23/01/11 19:37:34	    Page 1
string.asm



      1				     ;-----------------------------------------------------------
      2				     ; Пример ввода строки с 0ah int 21h
      3				     ;-----------------------------------------------------------
      4
      5	0000			     data    segment para public 'data'	     ; начало сегмента данных
      6									     ; para - сегмент начинается по адресу
      7									     ;	       кратному	16
      8									     ; public -	объединять все сегменты	с
      9									     ;		 одинаковым именем 'data'
     10	0000  82 A2 A5 A4 A8 E2	A5+  message1	     db	     'Введите любую строку: $'
     11	      20 AB EE A1 E3 EE	20+
     12	      E1 E2 E0 AE AA E3	3A+
     13	      20 24
     14	0017  0A 0D 82 EB 20 A2	A2+  message2	     db	     0ah,0dh,'Вы ввели строку: $'
     15	      A5 AB A8 20 E1 E2	E0+
     16	      AE AA E3 3A 20 24
     17	002B			     parlist label   byte    ;Список параметров
     18	002B  4F		     maxlen  db	     79		     ;максимальная длина значения
     19	002C  ??		     actlen  db	     ?		     ;фактически введенная длина
     20	002D  50*(00)		     value   db	     80	dup(0)	     ;введенное	значение
     21	007D			     data    ends			     ; конец сегмента данных
     22
     23	0000			     stk     segment stack		     ; начало сегмента стека
     24	0000  0100*(3F)			     db	     256 dup('?')
     25	0100			     stk     ends			     ; конец сегмента стека
     26
     27	0000			     code    segment para public 'code'	     ; начало сегмента кода
     28					     assume  cs:code,ds:data;,ss:stk
     29	0000			     smain   proc
     30
     31	0000  B8 0000s			     mov     ax,data		     ; связываем регистр ds с сегментом
     32	0003  8E D8			     mov     ds,ax		     ;	     данных через регистр ax
     33
     34	0005  B4 09			     mov     ah,09h		     ; 09h - код функции для вывода строки,
     35									     ;	     которая заканчивается '$'
     36	0007  BA 0000r			     mov     dx,offset message1	     ; адрес начала строки
     37	000A  CD 21			     int     21h		     ; вывод строки на экран
     38
     39	000C  B4 0A			     mov     ah,0ah		     ; 0ah - код функции для ввода строки
     40	000E  BA 002Br			     lea     dx,parlist		     ; адрес с параметрами для ввода строки
     41	0011  CD 21			     int     21h		     ; ввод строки с клавиатуры
     42
     43	0013  B4 09			     mov     ah,09h		     ; 09h - код функции для вывода строки
     44	0015  BA 0017r			     mov     dx,offset message2	     ; адрес начала строки
     45	0018  CD 21			     int     21h		     ; вывод строки на экран
     46
     47	001A  8A 0E 002Cr		     mov     cl,actlen		     ; длина введенной с клавиатуры строки
     48	001E  BE 002Dr			     lea     si,value		     ; адрес значения введенной	строки
     49	0021  B4 02			     mov     ah,2h		     ; 02h - код функции для вывода символа
     50	0023			     mlbl:
     51	0023  8A 14			     mov     dl,[si]		     ; выводимое значение символа
     52	0025  CD 21			     int     21h		     ; вывод символа на	экран
     53	0027  46			     inc     si			     ; адрес следующего	сммвола
     54	0028  E2 F9			     loop    mlbl		     ; кол-во повторений = длине строки
     55
     56	002A  B8 4C00			     mov     ax,4c00h		     ; 4c00h - код функции для стандартного
     57									     ;	      выхода
Turbo Assembler	 Version 4.1	    23/01/11 19:37:34	    Page 2
string.asm



     58	002D  CD 21			     int 21h			     ; стандартный выход
     59
     60	002F			     smain   endp
     61	002F			     code    ends			     ; конец сегмента кода
     62				     end     smain
Turbo Assembler	 Version 4.1	    23/01/11 19:37:34	    Page 3
Symbol Table




Symbol Name		Type   Value			   Cref	(defined at #)

??DATE			Text   "23/01/11"
??FILENAME		Text   "string	"
??TIME			Text   "19:37:34"
??VERSION		Number 040A
@CPU			Text   0101H
@CURSEG			Text   CODE			   #5  #23  #27
@FILENAME		Text   STRING
@WORDSIZE		Text   2			   #5  #23  #27
ACTLEN			Byte   DATA:002C		   #19	47
MAXLEN			Byte   DATA:002B		   #18
MESSAGE1		Byte   DATA:0000		   #10	36
MESSAGE2		Byte   DATA:0017		   #14	44
MLBL			Near   CODE:0023		   #50	54
PARLIST			Byte   DATA:002B		   #17	40
SMAIN			Near   CODE:0000		   #29	62
VALUE			Byte   DATA:002D		   #20	48

Groups & Segments	Bit Size Align	Combine	Class	   Cref	(defined at #)

CODE			16  002F Para	Public	CODE	   #27	28
DATA			16  007D Para	Public	DATA	   #5  28  31
STK			16  0100 Para	Stack		   #23
