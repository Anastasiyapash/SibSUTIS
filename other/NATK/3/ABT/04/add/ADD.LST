Turbo Assembler	 Version 4.1	    30/03/11 14:08:02	    Page 1
add.asm



      1					 ; --------------------------------------------------
      2					 ; Сложение ASCII-чисел
      3					 ; --------------------------------------------------
      4	    0000					 .MODEL	SMALL
      5	    0000					 .DATA
      6					 ; --------------------------------------------------
      7	    0000  35 34	38		 ASCVALUE1	 DB	   '548'		 ;ASCII-числа
      8	    0003  37 32	34		 ASCVALUE2	 DB	   '724'
      9	    0006  E0 A5	A7 E3 AB EC E2+	 message	 DB	   'результат сложения ','$'
     10		  A0 E2	20 E1 AB AE A6+
     11		  A5 AD	A8 EF 20 24
     12	    001A  30 30	30 30 24	 ASCTOTAL	 DB	   '0000','$'
     13					 .386  ; ---------------------------------------------
     14	    001F					 .CODE
     15	    0000			 BEGIN:
     16	    0000			 ADDASCII	 PROC	NEAR
     17	    0000  B8 0000s				 MOV	 AX,@DATA		 ;инициализация	DS
     18	    0003  8E D8					 MOV	 DS,AX			 ;	 через AX
     19
     20	    0005  F8					 CLC				 ;очистка CF
     21	    0006  BE 0002r				 LEA	   SI,ASCVALUE1+2	 ;инициализация	адресов
     22	    0009  BF 0005r				 LEA	   DI,ASCVALUE2+2	 ;   ASCII-чисел
     23	    000C  BB 001Dr				 LEA	   BX,ASCTOTAL+3
     24	    000F  B9 0003				 MOV	   CX,03		 ;кол-во повторений цикла
     25	    0012			 A20:
     26	    0012  0F B6	05				 MOVZX	AX,[DI]			 ;загрузить ASCII-байт в AX
     27	    0015  12 04					 ADC	   AL,[SI]		 ;сложить с возможным переносом
     28	    0017  37					 AAA				 ;скоректировать сложение
     29	    0018  88 07					 MOV	   [BX],AL		 ;сохранить сумму
     30	    001A  4E					 DEC	   SI
     31	    001B  4F					 DEC	   DI
     32	    001C  4B					 DEC	   BX
     33	    001D  E2 F3					 LOOP	A20			 ;повторить 3 раза
     34	    001F  88 27					 MOV	   [BX],AH		 ;в конце сохранить возможный
     35											 ;	  перенос
     36	    0021  BB 001Dr				 LEA	   BX,ASCTOTAL+3	 ;инициализация	преобразования
     37	    0024  B9 0004				 MOV	   CX,04		 ;  суммы в ASCII формат
     38	    0027			 A30:
     39	    0027  80 0F	30				 OR	   BYTE	PTR[BX],30H	 ;формирование ASCII-числа
     40	    002A  4B					 DEC	   BX
     41	    002B  E2 FA					 LOOP	A30			 ;повторить 4 раза
     42	    002D  B4 09					 mov	 ah,09h
     43	    002F  BA 0006r				 mov	 dx,offset message
     44	    0032  CD 21					 int	 21h
     45	    0034  B4 09					 mov	 ah,09h
     46	    0036  BA 001Ar				 mov	 dx,offset ASCTOTAL
     47	    0039  CD 21					 int	 21h
     48	    003B  B8 4C00				 MOV	   AX,4C00H		 ;стандартное окнчание программы
     49	    003E  CD 21					 INT	   21H
     50
     51	    0040			 ADDASCII	 ENDP
     52							 END	   BEGIN
Turbo Assembler	 Version 4.1	    30/03/11 14:08:02	    Page 2
Symbol Table




Symbol Name		Type   Value			   Cref	(defined at #)

??DATE			Text   "30/03/11"
??FILENAME		Text   "add	"
??TIME			Text   "14:08:02"
??VERSION		Number 040A
@32BIT			Text   0			   #4
@CODE			Text   _TEXT			   #4  #4  #14
@CODESIZE		Text   0			   #4
@CPU			Text   0F0FH			   #13
@CURSEG			Text   _TEXT			   #5  #14
@DATA			Text   DGROUP			   #4  17
@DATASIZE		Text   0			   #4
@FILENAME		Text   ADD
@INTERFACE		Text   000H			   #4
@MODEL			Text   2			   #4
@STACK			Text   DGROUP			   #4
@WORDSIZE		Text   2			   #5  #13  #14
A20			Near   _TEXT:0012		   #25	33
A30			Near   _TEXT:0027		   #38	41
ADDASCII		Near   _TEXT:0000		   #16
ASCTOTAL		Byte   DGROUP:001A		   #12	23  36	46
ASCVALUE1		Byte   DGROUP:0000		   #7  21
ASCVALUE2		Byte   DGROUP:0003		   #8  22
BEGIN			Near   _TEXT:0000		   #15	52
MESSAGE			Byte   DGROUP:0006		   #9  43

Groups & Segments	Bit Size Align	Combine	Class	   Cref	(defined at #)

DGROUP			Group				   #4  4  17
  _DATA			16  001F Word	Public	DATA	   #4  #5
_TEXT			16  0040 Word	Public	CODE	   #4  4  #14  14
